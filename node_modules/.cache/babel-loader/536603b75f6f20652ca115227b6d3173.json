{"ast":null,"code":"import Vue from \"vue\";\nimport VueRouter from \"vue-router\";\nimport firebase from \"firebase/app\";\nimport 'firebase/auth';\nimport Home from \"../views/Home.vue\";\nimport Blogs from \"../views/Blogs-view.vue\";\nimport Login from \"../views/Login-view.vue\";\nimport Register from \"../views/Register-view.vue\";\nimport ForgotPassword from \"../views/ForgotPassword-view.vue\";\nimport Admin from \"../views/Admin-view.vue\";\nimport Profile from \"../views/Profile-view.vue\";\nimport CreatePost from '../views/CreatePost-view.vue';\nimport BlogPreview from '../views/BlogPreview-view.vue';\nimport ViewBlog from '../views/ViewBlog-view.vue';\nimport EditBlog from '../views/EditPost-view.vue';\nVue.use(VueRouter);\nconst routes = [{\n  path: \"/\",\n  name: \"Home\",\n  component: Home,\n  meta: {\n    title: 'commencer',\n    requiresAuth: false\n  }\n}, {\n  path: \"/blogs\",\n  name: \"Blogs\",\n  component: Blogs,\n  meta: {\n    title: 'blogs',\n    requiresAuth: false\n  }\n}, {\n  path: \"/login\",\n  name: \"Login\",\n  component: Login,\n  meta: {\n    title: 'entrée',\n    requiresAuth: false\n  }\n}, {\n  path: \"/register\",\n  name: \"Register\",\n  component: Register,\n  meta: {\n    title: 'Une inscription',\n    requiresAuth: false\n  }\n}, {\n  path: \"/forgot-password\",\n  name: \"ForgotPassword\",\n  component: ForgotPassword,\n  meta: {\n    title: 'motDePasseOublié',\n    requiresAuth: false\n  }\n}, {\n  path: \"/admin\",\n  name: \"Admin\",\n  component: Admin,\n  meta: {\n    title: 'administration',\n    requiresAuth: true\n  }\n}, {\n  path: \"/profile\",\n  name: \"Profile\",\n  component: Profile,\n  meta: {\n    title: 'profil',\n    requiresAuth: true\n  }\n}, {\n  path: \"/create-post\",\n  name: \"CreatePost\",\n  component: CreatePost,\n  meta: {\n    title: 'nouveauPoste',\n    requiresAuth: true\n  }\n}, {\n  path: \"/blog-preview\",\n  name: \"BlogPreview\",\n  component: BlogPreview,\n  meta: {\n    title: 'aperçu',\n    requiresAuth: true\n  }\n}, {\n  path: \"/view-blog/:blogid\",\n  name: \"ViewBlog\",\n  component: ViewBlog,\n  meta: {\n    title: 'examen',\n    requiresAuth: false\n  }\n}, {\n  path: \"/edit-blog/:blogid\",\n  name: \"EditBlog\",\n  component: EditBlog,\n  meta: {\n    title: 'éditer',\n    requiresAuth: true\n  }\n}];\nconst router = new VueRouter({\n  mode: \"history\",\n  base: process.env.BASE_URL,\n  routes\n});\nrouter.beforeEach((to, from, next) => {\n  document.title = `${to.meta.title} | Site de blog`;\n  next();\n});\nrouter.beforeEach(async (to, from, next) => {\n  let user = firebase.auth().currentUser;\n  let admin = null;\n\n  if (user) {\n    let token = await user.getIdTokenResult();\n    admin = (await token.claims.email) == 'ari';\n  }\n\n  if (to.matched.some(res => res.meta.requiresAuth)) {\n    if (user) {\n      if (to.matched.some(res => res.meta.requiresAdmin)) {\n        if (admin) {\n          return next();\n        }\n\n        return next({\n          name: 'Home'\n        });\n      }\n\n      return next();\n    }\n\n    return next({\n      name: 'Home'\n    });\n  }\n\n  return next();\n});\nexport default router;","map":{"version":3,"names":["Vue","VueRouter","firebase","Home","Blogs","Login","Register","ForgotPassword","Admin","Profile","CreatePost","BlogPreview","ViewBlog","EditBlog","use","routes","path","name","component","meta","title","requiresAuth","router","mode","base","process","env","BASE_URL","beforeEach","to","from","next","document","user","auth","currentUser","admin","token","getIdTokenResult","claims","email","matched","some","res","requiresAdmin"],"sources":["C:/Users/HP/Desktop/test/good/Blog_with_VueJS_And_Firebase work/src/router/index.js"],"sourcesContent":["import Vue from \"vue\";\r\nimport VueRouter from \"vue-router\";\r\n\r\nimport firebase from \"firebase/app\";\r\nimport 'firebase/auth';\r\n\r\nimport Home from \"../views/Home.vue\";\r\nimport Blogs from \"../views/Blogs-view.vue\";\r\nimport Login from \"../views/Login-view.vue\";\r\nimport Register from \"../views/Register-view.vue\";\r\nimport ForgotPassword from \"../views/ForgotPassword-view.vue\";\r\nimport Admin from \"../views/Admin-view.vue\";\r\nimport Profile from \"../views/Profile-view.vue\";\r\nimport CreatePost from '../views/CreatePost-view.vue';\r\nimport BlogPreview from '../views/BlogPreview-view.vue';\r\nimport ViewBlog from '../views/ViewBlog-view.vue';\r\nimport EditBlog from '../views/EditPost-view.vue';\r\n\r\nVue.use(VueRouter);\r\n\r\nconst routes = [\r\n  {\r\n    path: \"/\",\r\n    name: \"Home\",\r\n    component: Home,\r\n    meta: {\r\n      title: 'commencer',\r\n      requiresAuth: false\r\n    }\r\n  },\r\n  {\r\n    path: \"/blogs\",\r\n    name: \"Blogs\",\r\n    component: Blogs,\r\n    meta: {\r\n      title: 'blogs',\r\n      requiresAuth: false\r\n    }\r\n  },\r\n  {\r\n    path: \"/login\",\r\n    name: \"Login\",\r\n    component: Login,\r\n    meta: {\r\n      title: 'entrée',\r\n      requiresAuth: false\r\n    }\r\n  },\r\n  {\r\n    path: \"/register\",\r\n    name: \"Register\",\r\n    component: Register,\r\n    meta: {\r\n      title: 'Une inscription',\r\n      requiresAuth: false\r\n    }\r\n  },\r\n  {\r\n    path: \"/forgot-password\",\r\n    name: \"ForgotPassword\",\r\n    component: ForgotPassword,\r\n    meta: {\r\n      title: 'motDePasseOublié',\r\n      requiresAuth: false\r\n    }\r\n  },\r\n  {\r\n    path: \"/admin\",\r\n    name: \"Admin\",\r\n    component: Admin,\r\n    meta: {\r\n      title: 'administration',\r\n      requiresAuth: true\r\n    }\r\n  },\r\n  {\r\n    path: \"/profile\",\r\n    name: \"Profile\",\r\n    component: Profile,\r\n    meta: {\r\n      title: 'profil',\r\n      requiresAuth: true\r\n    }\r\n  },\r\n  {\r\n    path: \"/create-post\",\r\n    name: \"CreatePost\",\r\n    component: CreatePost,\r\n    meta: {\r\n      title: 'nouveauPoste',\r\n      requiresAuth: true\r\n    }\r\n  },\r\n  {\r\n    path: \"/blog-preview\",\r\n    name: \"BlogPreview\",\r\n    component: BlogPreview,\r\n    meta: {\r\n      title: 'aperçu',\r\n      requiresAuth: true\r\n    }\r\n  },\r\n  {\r\n    path: \"/view-blog/:blogid\",\r\n    name: \"ViewBlog\",\r\n    component: ViewBlog,\r\n    meta: {\r\n      title: 'examen',\r\n      requiresAuth: false\r\n    }\r\n  },\r\n  {\r\n    path: \"/edit-blog/:blogid\",\r\n    name: \"EditBlog\",\r\n    component: EditBlog,\r\n    meta: {\r\n      title: 'éditer',\r\n      requiresAuth: true\r\n    }\r\n  }\r\n];\r\n\r\nconst router = new VueRouter({\r\n  mode: \"history\",\r\n  base: process.env.BASE_URL,\r\n  routes,\r\n});\r\n\r\nrouter.beforeEach((to, from, next) => {\r\n  document.title = `${to.meta.title} | Site de blog`;\r\n  next();\r\n});\r\n\r\nrouter.beforeEach(async (to, from, next) => {\r\n  let user = firebase.auth().currentUser;\r\n  let admin = null;\r\n\r\n  if(user) {\r\n    let token = await user.getIdTokenResult();\r\n    admin = await token.claims.email == 'ari';\r\n  }\r\n\r\n  if(to.matched.some(res => res.meta.requiresAuth)) {\r\n    if(user) {\r\n      if(to.matched.some(res => res.meta.requiresAdmin)) {\r\n        if(admin) {\r\n          return next();\r\n        }       \r\n        return next({ name: 'Home' });\r\n      }\r\n      return next();\r\n    }\r\n    return next({ name: 'Home' });\r\n  }\r\n  return next();\r\n});\r\n\r\nexport default router;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}